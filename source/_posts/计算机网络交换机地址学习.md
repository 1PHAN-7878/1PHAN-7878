---
title: 交换机地址学习
date: 2023-11-07 14:43:19
tags: 计算机网络
---

# 实验五 交换机地址自学习

### 一、实验目的

1．了解交换机的作用。

2.查看MAC地址转发表，理解交换机的基于MAC地址转发表的工作过程。

3.掌握交换机地址自学习的过程。

### 二、实验内容

1．使用Cisco Packet Tracer画出网络拓扑图。

2．查看MAC地址转发表。

3．观察交换机地址自学习的过程。

### 三、实验原理

以太网交换机的自学习功能：

我们假设一个以太网交换机有1、2、3、4，共4个接口，每个接口都分别连接了一台计算机，他们的MAC地址分别是A、B、C和D。在最开始的时候，交换机的交换表是空的。假如A向B发送了一帧，从接口1进入交换机，交换机收到这一帧之后会先查找交换表，不过很显然表是空的，交换机查不到应该从哪个接口转发这个帧（就是找不到目的地址为B的表项）。那么接下来，交换机就会把这个帧的源地址A和接口1写入交换表中，并向除了接口1之外的所有接口广播这个帧。那么这样一来，不论交换机的哪个接口收到目的地址是A的帧，都只要把这个帧转发到接口1，因为既然A发送的帧能从接口1进入交换机，那么交换机自然也能从接口1找到A。

上面我们说交换机会向除接口1之外的所有接口广播A发出的那一帧，C跟D收到之后将会丢弃这个帧，因为目的地址与他们的MAC地址不符，只有B会收下这一帧。这种机制也称为过滤。

那么经过一段时间，交换机会把所有发送过数据的主机的MAC地址与对应接口号记录下来，这样交换表中的表项就齐全了，要转发给任何一台主机的帧都能很快的在交换表中找到相对应的转发接口。

### 四、实验步骤

**在模拟器中画出拓扑图，查看思科交换机MAC地址表，并观察交换机进行地质自学习的过程**

一、先画出如下拓扑图：

![img](../images/clip_image002.jpg)

然后设置每台PC的IP地址，可单击PC，在弹出的对话框中设置：

![img](../images/clip_image004.jpg)

单击交换机，选择CLI标签，在命令行中输入：

```shell
在Switch>后面输入en（或enable），进入特权模式。

然后在Switch#后输入show mac-address-table

此时地址表里有可能是空的，也有可能已经有记录了，如果有记录了，请使用清除命令清空地址表。

Switch#clear mac-address-table

此时再查看，

Switch#show mac-address-table

应该已经清空了。
```

下面单击任何一个PC，选择Desktop 标签的Command Prompt命令：

![img](../images/clip_image006.jpg)

![img](../images/clip_image008.jpg)

Ping 10.0.0.2后如上图所示，代表可以ping通，此时进入交换机，查看mac地址表

看一下有什么变化。

再ping另外两台PC，每次ping完，观察地址表的变化。

 

观察时，注意mac地址以及端口号，思考一下分别都是哪些PC的？

![img](../images/clip_image010.gif)

 

 

二、再画出如下拓扑图：

![img](../images/clip_image012.gif)

在PC0上ping PC1，观察switch0和switch1中地址表的变化。

再用PC0去ping PC7，以及PC6 去ping PC0，分别观察两个路由器中地址表的变化，记录变化过程。

### 五、实验报告要求

1．练习使用Cisco Packet Tracer 画出网络拓扑结构图，按照实验步骤完成交换机自学习的实验内容，并截屏+文字记录相关步骤，说明交换机进行地址自学习的过程。 

提交word文档，文件名为：学号姓名实验五。先不交，与后续交换机实验报告一起交。

 我先配置设备以及ip地址，我使用pc0来ping pc1，会生成mac表中的一部分

![image-20231107145502375](../images/image-20231107145502375.png)

使用pc1 去ping pc2，我把交换机1口连接到pc3, 3口连接到集线器

![image-20231107145847512](../images/image-20231107145847512.png)

如图配置所有的设备以及ip地址

![image-20231107151718970](../images/image-20231107151718970.png)

地址192.168.1.1 ping 192.168.1.2 

![image-20231107151823565](../images/image-20231107151823565.png)

但是右边的并没有更改table

![image-20231107151948284](../images/image-20231107151948284.png)

采用192.168.1.1来ping192.1681.1.8后

![](../images/image-20231107152143513.png![image-20231107152154886](../images/image-20231107152154886.png)

![image-20231107152215602](../images/image-20231107152215602.png)
